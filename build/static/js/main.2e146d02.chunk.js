(this["webpackJsonpchinese-cheese"]=this["webpackJsonpchinese-cheese"]||[]).push([[0],{41:function(e,r,t){e.exports=t(73)},46:function(e,r,t){},52:function(e,r,t){},53:function(e,r,t){},54:function(e,r,t){},55:function(e,r,t){var o={"./\u4ed5_red.png":56,"./\u5175_red.png":57,"./\u5352_black.png":58,"./\u58eb_black.png":59,"./\u5c06_black.png":60,"./\u5e05_red.png":61,"./\u70ae_black.png":62,"./\u76f8_red.png":63,"./\u7832_red.png":64,"./\u8c61_black.png":65,"./\u8eca_black.png":66,"./\u8eca_red.png":67,"./\u99ac_black.png":68,"./\u99ac_red.png":69};function n(e){var r=a(e);return t(r)}function a(e){if(!t.o(o,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=a,e.exports=n,n.id=55},56:function(e,r,t){e.exports=t.p+"static/media/\u4ed5_red.153eb7ea.png"},57:function(e,r,t){e.exports=t.p+"static/media/\u5175_red.fe5a6e46.png"},58:function(e,r,t){e.exports=t.p+"static/media/\u5352_black.a45bd480.png"},59:function(e,r,t){e.exports=t.p+"static/media/\u58eb_black.1c5324f3.png"},60:function(e,r,t){e.exports=t.p+"static/media/\u5c06_black.349ed535.png"},61:function(e,r,t){e.exports=t.p+"static/media/\u5e05_red.13afce9f.png"},62:function(e,r,t){e.exports=t.p+"static/media/\u70ae_black.6ef291b4.png"},63:function(e,r,t){e.exports=t.p+"static/media/\u76f8_red.ed8d9e85.png"},64:function(e,r,t){e.exports=t.p+"static/media/\u7832_red.1abdb6d5.png"},65:function(e,r,t){e.exports=t.p+"static/media/\u8c61_black.f959bf29.png"},66:function(e,r,t){e.exports=t.p+"static/media/\u8eca_black.808be253.png"},67:function(e,r,t){e.exports=t.p+"static/media/\u8eca_red.9bf2dba6.png"},68:function(e,r,t){e.exports=t.p+"static/media/\u99ac_black.668d40a6.png"},69:function(e,r,t){e.exports=t.p+"static/media/\u99ac_red.31b9c336.png"},71:function(e,r,t){},73:function(e,r,t){"use strict";t.r(r);var o,n=t(0),a=t.n(n),c=t(11),i=t.n(c),u=(t(46),t(2)),l=t(3),s=t(13),p=t(12),m=t(14),g=t(10),f=t(79),d=t(39),b=t(5),h=t(80),E={VEHICLE:"\u8eca",HORSE:"\u99ac",ELEPHANT:"\u8c61",GUARD:"\u58eb",MARSHAL:"\u5c06",GUN:"\u70ae",SOLIDER:"\u5352"},v={VEHICLE:"\u8eca",HORSE:"\u99ac",ELEPHANT:"\u76f8",GUARD:"\u4ed5",MARSHAL:"\u5e05",GUN:"\u7832",SOLIDER:"\u5175"},C="black",R="red",w=[[{role:E.VEHICLE,group:C},{role:E.HORSE,group:C},{role:E.ELEPHANT,group:C},{role:E.GUARD,group:C},{role:E.MARSHAL,group:C},{role:E.GUARD,group:C},{role:E.ELEPHANT,group:C},{role:E.HORSE,group:C},{role:E.VEHICLE,group:C}],["","","","","","","","",""],["",{role:E.GUN,group:C},"","","","","",{role:E.GUN,group:C},""],[{role:E.SOLIDER,group:C},"",{role:E.SOLIDER,group:C},"",{role:E.SOLIDER,group:C},"",{role:E.SOLIDER,group:C},"",{role:E.SOLIDER,group:C}],["","","","","","","","",""],["","","","","","","","",""],[{role:v.SOLIDER,group:R},"",{role:v.SOLIDER,group:R},"",{role:v.SOLIDER,group:R},"",{role:v.SOLIDER,group:R},"",{role:v.SOLIDER,group:R}],["",{role:v.GUN,group:R},"","","","","",{role:v.GUN,group:R},""],["","","","","","","","",""],[{role:v.VEHICLE,group:R},{role:v.HORSE,group:R},{role:v.ELEPHANT,group:R},{role:v.GUARD,group:R},{role:v.MARSHAL,group:R},{role:v.GUARD,group:R},{role:v.ELEPHANT,group:R},{role:v.HORSE,group:R},{role:v.VEHICLE,group:R}]],_="card",O=0,A=1,k=2,N=3,S=t(9),j=new function e(){var r,t=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=o.role,a=void 0===n?C:n;Object(u.a)(this,e),this.timerInterval=function(){t.timer=setInterval((function(){t.gameTimer+=1e3,t.timerCbs.forEach((function(e){"function"===typeof e&&e()}))}),1e3)},this.addTimerCb=function(e){t.timerCbs.push(e||function(){})},this.roundChange=function(e){t.round++,1===t.round&&t.timerInterval(),t.result===O?t.groupInAction=t.groupTurn[t.groupInAction]:t.result,t.roundChangeCbs.forEach((function(e){"function"===typeof e&&e()}))},this.addRoundChangeCb=function(e){t.roundChangeCbs.push(e||function(){})},this.judgeFinish=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.targetRow,n=r.targetCol,a=r.willToTie,c=void 0!==a&&a;if(c)t.result=N;else{var i=t.groupInAction===R,u=i?E:v,l=!1;e[o][n]&&e[o][n].role===u.MARSHAL&&(l=!0),t.result=l?i?k:A:O}},this.round=0,this.roundChangeCbs=[],this.groupInAction=a,this.roundCache=[],this.timer=null,this.gameTimer=0,this.timerCbs=[],this.result=O,this.groupTurn=(r={},Object(S.a)(r,C,R),Object(S.a)(r,R,C),r),this.pointsSnap=[]},L=j,I=function(e,r,t){var o=Number(r.row-1),n=Number(r.col-1),a=Number(e.fromRow-1),c=Number(e.fromCol-1),i=Math.abs(o-a),u=Math.abs(n-c),l=t[o][n].group===e.group&&e.group;return{targetRow:o,targetCol:n,fromRow:a,fromCol:c,rowChanges:i,colChanges:u,group:e.group,isSameGroup:l}},H=(o={},Object(S.a)(o,C,{startRow:0,endRow:2,startCol:3,endCol:5}),Object(S.a)(o,R,{startRow:7,endRow:9,startCol:3,endCol:5}),o),y=function(e,r,t){var o=I(e,r,t),n=o.targetRow,a=(o.targetCol,o.fromRow),c=(o.fromCol,o.rowChanges),i=o.colChanges,u=o.isSameGroup,l=e.group===R,s=!0;return(!(s=function(e,r){return(e||{}).group===R?r<=5:r>=6}(e,a+1)?i+c===1&&(l?n<=a:n>=a):l?n===a-1&&0===i:n===a+1&&0===i)||!u)&&s},D=function(e,r,t){var o=I(e,r,t),n=o.targetRow,a=o.targetCol,c=o.fromRow,i=o.fromCol,u=o.rowChanges,l=o.colChanges,s=o.isSameGroup,p=!0;if(0===u||0===l){if(0===l){for(var m=Math.max(c,n),g=Math.min(c,n)+1;g<m;g++)if(t[g][a]){p=!1;break}}else for(var f=Math.max(i,a),d=Math.min(i,a)+1;d<f;d++)if(t[n][d]){p=!1;break}return(!p||!s)&&p}return!1},M=function(e,r,t){var o=I(e,r,t),n=o.targetRow,a=o.targetCol,c=o.fromRow,i=o.fromCol,u=o.rowChanges,l=o.colChanges,s=o.isSameGroup,p=!0;if(u+l===3){if(2===u){p=!t[Math.min(c,n)+1][i]}else{var m=Math.min(i,a);p=!t[c][m+1]}return(!p||!s)&&p}return!1},G=function(e,r,t){var o=I(e,r,t),n=o.targetRow,a=o.targetCol,c=o.fromRow,i=o.fromCol,u=o.rowChanges,l=o.colChanges,s=o.isSameGroup,p=!0;if(2===u&&2===l){var m=Math.min(c,n),g=Math.min(i,a);return(!(p=!t[m+1][g+1])||!s)&&p}return!1},x=function(e,r,t){var o=I(e,r,t),n=o.targetRow,a=o.targetCol,c=o.rowChanges,i=o.colChanges,u=o.isSameGroup,l=o.group,s=!0;return 1===c&&1===i?s=H[l].startCol<=a&&H[l].endCol>=a&&H[l].startRow<=n&&H[l].endRow>=n:1===c?s=H[l].startRow<=n&&H[l].endRow>=n:1===i&&(s=H[l].startCol<=a&&H[l].endCol>=a),(!s||!u)&&s},T=function(e,r,t){var o=I(e,r,t),n=o.targetRow,a=o.targetCol,c=o.rowChanges,i=o.colChanges,u=o.isSameGroup,l=o.group,s=!0;if(c+i===1){if(H[l].startRow<=n&&H[l].endRow>=n&&H[l].startCol<=a&&H[l].endCol>=a)if(l===C){for(var p=n;p<=9;p++)if(t[p][a]){s=t[p][a].role!==v.MARSHAL;break}}else for(var m=n;m>=0;m--)if(t[m][a]){s=t[m][a].role!==E.MARSHAL;break}return(!s||!u)&&s}return!1},P=function(e,r,t){var o=I(e,r,t),n=o.targetRow,a=o.targetCol,c=o.fromRow,i=o.fromCol,u=o.rowChanges,l=o.colChanges,s=o.isSameGroup,p=0;if(0===u||0===l){if(0===l)for(var m=Math.max(c,n),g=Math.min(c,n)+1;g<m;g++)t[g][i]&&p++;else for(var f=Math.max(i,a),d=Math.min(i,a)+1;d<f;d++)t[c][d]&&p++;if(1===p&&t[n][a]&&!s)return!0;if(0===p&&!t[n][a])return!0}return!1},U=(t(52),Object(g.b)((function(e){return{points:e.pointors}}))((function(e){var r=e.className,t=e.row,o=e.col,n=e.move,c=e.points,i=Object(h.a)((function(){return{accept:_,canDrop:function(e){return function(e,r,t){if(j.groupInAction!==e.group)return!1;var o=!1;if(!(r&&e&&t.length))return o;var n=I(e,r,t),a=n.targetRow,c=n.targetCol,i=n.fromRow,u=n.fromCol;if(a===i&&c===u)return o;switch((e||{}).role){case E.SOLIDER:case v.SOLIDER:o=y(e,r,t);break;case E.GUN:case v.GUN:o=P(e,r,t);break;case E.VEHICLE:case v.VEHICLE:o=D(e,r,t);break;case E.HORSE:case v.HORSE:o=M(e,r,t);break;case E.ELEPHANT:case v.ELEPHANT:o=G(e,r,t);break;case E.GUARD:case v.GUARD:o=x(e,r,t);break;case E.MARSHAL:case v.MARSHAL:o=T(e,r,t)}return o}(e,{row:t,col:o},c)},drop:function(e){var r=e||{},t=r.group,o=r.role,a=r.fromRow,c=r.fromCol;n({group:t,role:o},{row:a,col:c})},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}}),[c]),u=Object(b.a)(i,2),l=(u[0]._,u[1]);return t&&o?a.a.createElement("div",{ref:l,className:r,row:t,col:o,id:"".concat(t,"_").concat(o)}):null}))),F=t(21),V=t(28),B=Object(V.b)({name:"pointors",initialState:[],reducers:{updatePointors:function(e,r){var t=r.payload||{},o=t.chess,n=t.targetRow,a=t.targetCol,c=o||{},i=c.group,u=c.role,l=c.fromRow,s=c.fromCol;if(Number(n)===Number(l)&&Number(a)===Number(s))return e;if(n&&a){var p=n-1,m=a-1,g=l-1,f=s-1;p<=9&&m<=8&&(e[p][m]={role:u,group:i},e[g][f]="")}return L.roundChange(e),e},resetPointors:function(){return w}}}),W=Object(F.a)({},B.actions),J=Object(V.a)({reducer:{pointors:B.reducer}}),$=(t(53),["1_4","2_5","8_4","9_5"]),q=["1_5","2_4","8_5","9_4"],z=["2_1","2_7","7_1","7_7"],K=["3_1","3_7","8_1","8_7"],Q=["3_2","3_8","8_2","8_8"],X=["2_2","2_8","7_2","7_8"],Y=Object(g.b)((function(e){return{points:e.pointors}}),{move:W.updatePointors,init:W.resetPointors})((function(e){var r=e.move,t=e.points,o=e.init,c=function(e,o){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="".concat(e,"_").concat(o),u=e<=5?"pointer-black":"pointer-red",l=8===o,s="",p="";$.includes(i)&&(s+=" slant"),q.includes(i)&&(s+=" slant-back"),z.includes(i)&&(s+=" anchor-rb"),K.includes(i)&&(s+=" anchor-rt"),Q.includes(i)&&(s+=" anchor-lt"),X.includes(i)&&(s+=" anchor-lb"),c&&(s+=" hide-border");var m=Object(n.useCallback)((function(e,o){return function(n,a){var c=n.group,i=n.role,u=a.row,l=a.col;L.judgeFinish(t,{targetRow:e-1,targetCol:o-1}),r({chess:{group:c,role:i,fromRow:u,fromCol:l},targetRow:e,targetCol:o})}}),[o,e,t]);if(5===e)return a.a.createElement("div",{key:i,className:"grid ".concat(s)},a.a.createElement(U,{move:m(e,o),className:"".concat(u," pointer-bottom"),row:e,col:o}),l?a.a.createElement(U,{move:m(e,o+1),className:"".concat(u," pointer-bottom last"),row:e,col:o+1}):null,a.a.createElement(U,{move:m(e+1,o),className:"pointer-red pointer-top",row:e+1,col:o}),l?a.a.createElement(U,{move:m(e+1,o+1),className:"pointer-red pointer-top last",row:e+1,col:o+1}):null);var g=e>5?e+1:e;return a.a.createElement("div",{key:i,className:"grid ".concat(s)},a.a.createElement(U,{move:m(g,o),className:"".concat(u).concat(p),row:g,col:o}),l?a.a.createElement(U,{move:m(g,o+1),className:"".concat(u," last"),row:g,col:o+1}):null)},i=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"banner-left"},a.a.createElement("p",null,"\u695a \u6cb3")),a.a.createElement("div",{className:"banner-right"},a.a.createElement("p",null,"\u6c49 \u754c")))};return Object(n.useEffect)((function(){o()}),[]),a.a.createElement("div",{id:"Checkerboard"},Array(9).fill("").map((function(e,r){return 5===(t=r+1)?a.a.createElement("div",{className:"divider",key:t},i(),Array(8).fill("").map((function(e,r){return c(t,r+1,!0)}))):a.a.createElement(a.a.Fragment,null,Array(8).fill("").map((function(e,r){return c(t,r+1)})));var t})))})),Z=t(81),ee=t(78),re=(t(54),function(e){var r=e.group,o=e.role,c=e.position,i=void 0===c?"":c,u=e.style,l=void 0===u?{}:u,s=i.split("_")||[],p=Object(b.a)(s,2),m=p[0],g=p[1],f=Object(Z.a)({type:_,item:function(){return{role:o,group:r,fromRow:m,fromCol:g}},collect:function(e){return{isDragging:e.isDragging()}}}),d=Object(b.a)(f,3),h=d[0].isDragging,E=d[1],v=d[2],C=Object(n.useMemo)((function(){var e="";try{e=t(55)("./".concat(o,"_").concat(r,".png"))}catch(n){e=""}return e}),[r,o]);return o?a.a.createElement(a.a.Fragment,null,a.a.createElement(ee.a,{connect:v,src:C}),a.a.createElement("div",{ref:E,className:"chessman",style:Object(F.a)({},l,{opacity:h?.5:1}),group:r},o)):null}),te=Object(g.b)((function(e){return{points:e.pointors}}))(function(e){function r(){var e,t;Object(u.a)(this,r);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(t=Object(s.a)(this,(e=Object(p.a)(r)).call.apply(e,[this].concat(n))))._renderPoints=function(){return Array.isArray(t.props.points)?t.props.points.map((function(e,r){var o=r+1;return e.map((function(e,r){var n=r+1;return t._renderPoint("".concat(o,"_").concat(n),e)}))})):null},t._renderPoint=function(e,r){if(!e||!r)return null;var t=document.getElementById(e),o=r||{},n=o.role,i=o.group;return n&&i&&t?Object(c.createPortal)(a.a.createElement(re,{key:e,position:e,group:i,role:n}),t):null},t}return Object(m.a)(r,e),Object(l.a)(r,[{key:"render",value:function(){return this.props.points?a.a.createElement(a.a.Fragment,null,this._renderPoints()):null}}]),r}(a.a.Component)),oe=t(37),ne=t.n(oe),ae=(t(71),Object(g.b)((function(e){return{}}))(function(e){function r(){var e,t;Object(u.a)(this,r);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(t=Object(s.a)(this,(e=Object(p.a)(r)).call.apply(e,[this].concat(n)))).state={gameTimer:L.gameTimer||0,groupInAction:L.groupInAction},t}return Object(m.a)(r,e),Object(l.a)(r,[{key:"_timeFormat",value:function(e){return e?ne()(e).utcOffset(0).format("HH:mm:ss"):""}},{key:"componentDidMount",value:function(){var e=this;L.addTimerCb((function(){e.setState({gameTimer:L.gameTimer})})),L.addRoundChangeCb((function(){e.setState({groupInAction:L.groupInAction})}))}},{key:"render",value:function(){var e=this.state||{},r=e.gameTimer,t=e.groupInAction,o="\u8f6e\u5230: ".concat(t===C?"\u9ed1\u65b9":"\u7ea2\u65b9","\u843d\u5b50");return Object(c.createPortal)(a.a.createElement("div",{id:"Dashboard"},a.a.createElement("p",{className:"dashboard_text"},"\u7528\u65f6: ".concat(this._timeFormat(r)||"00:00:00")),a.a.createElement("p",{className:"dashboard_text"},o),a.a.createElement("p",{className:"dashboard_btn"},"\u6c42\u548c")),document.body)}}]),r}(a.a.Component))),ce=function(e){function r(){return Object(u.a)(this,r),Object(s.a)(this,Object(p.a)(r).apply(this,arguments))}return Object(m.a)(r,e),Object(l.a)(r,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(g.a,{store:J},a.a.createElement(f.a,{backend:d.a},a.a.createElement(Y,null),a.a.createElement(te,null),a.a.createElement(ae,null))))}}]),r}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(ce,null),document.getElementById("CheckerboardWrapper")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.2e146d02.chunk.js.map